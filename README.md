Based on Eli Benderskys lexer see eg https://github.com/eliben/code-for-blog/blob/master/2018/type-inference/lexer.py
